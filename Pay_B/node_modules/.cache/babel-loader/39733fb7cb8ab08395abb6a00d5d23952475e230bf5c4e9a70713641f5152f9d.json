{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Pagination from '../../../components/Pagination';\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      roomHotelId: '',\n      formLabelWidth: '100px',\n      dialogroom: false,\n      dialogTableVisible: false,\n      //房间弹窗\n      uploadFileUrl: this.HOST + \"/hotel/upload\",\n      // 上传文件服务器地址\n      fileIds: [],\n      fileRoomIds: [],\n      options: [{\n        value: '0',\n        label: '有折扣'\n      }, {\n        value: '1',\n        label: '无折扣'\n      }],\n      allmenu: [],\n      data: [],\n      nshow: true,\n      //switch开启\n      fshow: false,\n      //switch关闭\n      loading: false,\n      //是显示加载\n      editFormVisible: false,\n      //控制编辑页面显示与隐藏\n      title: '添加',\n      editForm: {\n        name: '',\n        address: '',\n        rating: 0,\n        discount: '0',\n        minPrice: 0,\n        star: 0\n        // fileIds: ''\n      },\n\n      roomForm: {\n        roomId: '',\n        hotelId: '',\n        type: '',\n        price: 0,\n        discount: '0',\n        area: 0\n      },\n      // rules表单验证\n      rules: {\n        name: [{\n          required: true,\n          message: '请输入酒店名称',\n          trigger: 'blur'\n        }],\n        address: [{\n          required: true,\n          message: '请输入酒店地址',\n          trigger: 'blur'\n        }],\n        // rating: [{\n        //   required: true,\n        //   message: '请点击选择评分',\n        //   trigger: 'blur'\n        // }],\n        minPrice: [{\n          required: true,\n          message: '请输入最低价格',\n          trigger: 'blur'\n        }]\n      },\n      formInline: {\n        page: 1,\n        limit: 10,\n        varLable: '',\n        varName: '',\n        departureAirport: '',\n        arrivalAirport: ''\n      },\n      // 删除部门\n      seletedata: {\n        ids: '',\n        token: localStorage.getItem('logintoken')\n      },\n      userparm: [],\n      //搜索权限\n      listData: [],\n      //酒店数据\n      roomListData: [],\n      //房间数据\n      // 分页参数\n      pageparm: {\n        currentPage: 1,\n        pageSize: 10,\n        total: 10\n      }\n    };\n  },\n  // 注册组件\n  components: {\n    Pagination\n  },\n  /**\r\n   * 数据发生改变\r\n   */\n\n  /**\r\n   * 创建完毕\r\n   */\n  created() {\n    const start = new Date(); //获取当前的日期\n    const end = new Date(); //获取当前的日期\n    start.setTime(start.getTime());\n    end.setTime(end.getTime() + 3600 * 1000 * 24 * 3);\n    // this.formInline.beginDate = this.dateFormat(start);\n    // this.formInline.endDate = this.dateFormat(end);\n    this.formInline.beginDate = start;\n    this.formInline.endDate = end;\n    this.getdata(this.formInline);\n  },\n  /**\r\n   * 里面的方法只有被调用才会执行\r\n   */\n  methods: {\n    // dateFormat(dateData) {\n    //   var date = new Date(dateData)\n    //   var y = date.getFullYear()\n    //   var m = date.getMonth() + 1\n    //   m = m < 10 ? ('0' + m) : m\n    //   var d = date.getDate()\n    //   d = d < 10 ? ('0' + d) : d\n    //   const time = y + '-' + m + '-' + d\n    //   return time\n    // },\n    // 获取酒店列表\n    getdata(parameter) {\n      this.loading = true;\n      var that = this;\n      that.listData = [];\n      var url = '';\n      var name = that.formInline.departureAirport;\n      var address = that.formInline.arrivalAirport;\n      console.log(that.formInline.beginDate, that.formInline.endDate);\n      if (name == \"\" || name == null || name == undefined) {\n        if (address == \"\" || address == null || address == undefined) {\n          url = this.HOST + '/flight/list1?beginDate=' + that.formInline.beginDate + '&endDate=' + that.formInline.endDate;\n        } else {\n          url = this.HOST + '/flight/list1?arrivalAirport=' + that.formInline.arrivalAirport + '&beginDate=' + that.formInline.beginDate + '&endDate=' + that.formInline.endDate;\n        }\n      } else {\n        if (address == \"\" || address == null || address == undefined) {\n          url = this.HOST + '/flight/list1?departureAirport=' + that.formInline.departureAirport + '&beginDate=' + that.formInline.beginDate + '&endDate=' + that.formInline.endDate;\n        } else {\n          url = this.HOST + '/flight/list1?departureAirport=' + that.formInline.departureAirport + '&arrivalAirport=' + that.formInline.arrivalAirport + '&beginDate=' + that.formInline.beginDate + '&endDate=' + that.formInline.endDate;\n        }\n      }\n      //url = this.HOST + '/flight/list1?beginDate=' + that.formInline.beginDate + '&endDate=' + that.formInline.endDate;\n      axios.get(url).then(res => {\n        for (var i = 0; i < res.data.list.length; i++) {\n          var array = [];\n          var strs = res.data.list[i].fileIds;\n          if (strs != \"\" && strs != null && strs != undefined) {\n            array = strs.split(',');\n          }\n          var html = {\n            flightId: res.data.list[i].flightId,\n            flightNumber: res.data.list[i].flightNumber,\n            departureTime: res.data.list[i].departureTime,\n            arrivalTime: res.data.list[i].arrivalTime,\n            departureAirport: res.data.list[i].departureAirport,\n            arrivalAirport: res.data.list[i].arrivalAirport,\n            minPrice: res.data.list[i].minPrice,\n            discount: res.data.list[i].discount,\n            company: res.data.list[i].company,\n            images: array\n            // names: res.data.list[i].names,\n            // urls: res.data.list[i].fileIds\n          };\n\n          that.listData.push(html);\n        }\n        this.loading = false;\n      });\n    },\n    // 分页插件事件\n    callFather(parm) {\n      this.formInline.page = parm.currentPage;\n      this.formInline.limit = parm.pageSize;\n      this.getdata(this.formInline);\n    },\n    // 搜索事件\n    search() {\n      this.getdata(this.formInline);\n    },\n    handleSelectionChange(selection) {\n      this.ids = selection.map(item => item.hotelId);\n      console.log(\"this.ids:\" + this.ids);\n    },\n    findEditRoom: function (index, row) {\n      this.dialogTableVisible = true;\n      this.roomListData = [];\n      axios.get(this.HOST + '/flightClass/list?flightId=' + row.flightId).then(res => {\n        for (var i = 0; i < res.data.list.length; i++) {\n          var roomarray = [];\n          var strs = res.data.list[i].fileIds;\n          if (strs != \"\" && strs != null && strs != undefined) {\n            roomarray = strs.split(',');\n          }\n          var html = {\n            classId: res.data.list[i].classId,\n            flightId: res.data.list[i].flightId,\n            cabin: res.data.list[i].cabin,\n            price: res.data.list[i].price,\n            discount: res.data.list[i].discount,\n            roomimages: roomarray\n          };\n          this.roomListData.push(html);\n        }\n        this.roomHotelId = row.flightId;\n        this.loading = false;\n      });\n    },\n    bookRoom: function (index, row) {\n      var userid = localStorage.getItem('userid');\n      var paymentPassword = localStorage.getItem('userpaymentpassword');\n      var classId = row.classId;\n      console.log(\"1111:\" + userid, paymentPassword, classId);\n      axios({\n        method: 'post',\n        url: this.HOST + '/order/createFlightOrder',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        data: {\n          buyerId: userid,\n          paymentPassword: paymentPassword,\n          classId: classId,\n          beginDate: this.formInline.beginDate,\n          endDate: this.formInline.endDate\n        },\n        traditional: true,\n        transformRequest: [function (data) {\n          let ret = '';\n          for (let it in data) {\n            ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&';\n          }\n          return ret;\n        }]\n      }).then(res => {\n        this.editFormVisible = false;\n        this.getdata(this.formInline);\n        if (res.data.code == 1) {\n          this.$message({\n            type: 'success',\n            message: '预订成功！'\n          });\n        } else {\n          this.$message({\n            type: 'success',\n            message: res.data.msg\n          });\n        }\n      });\n    },\n    // 关闭编辑、增加弹出框\n    closeDialog() {\n      this.editFormVisible = false;\n    },\n    // 上传图片\n    selectPicUpload(obj) {\n      let fd = new FormData(); //参数的格式是formData格式的\n      fd.append(\"file\", obj.file); //参数\n      fd.append(\"path\", \"train\");\n      this.$axios.post(this.HOST + \"/hotel/upload\", fd).then(res => {\n        console.log(res.data.msg);\n        if (res.data.code == 1) {\n          this.fileIds.push(res.data.data.fileId);\n          this.$message(res.data.msg);\n        } else {\n          this.$message(res.data.msg);\n        }\n      });\n    },\n    // 房型上传图片\n    selectRoomPicUpload(obj) {\n      let fd = new FormData(); //参数的格式是formData格式的\n      fd.append(\"file\", obj.file); //参数\n      fd.append(\"path\", \"train\");\n      this.$axios.post(this.HOST + \"/hotel/upload\", fd).then(res => {\n        console.log(res.data.msg);\n        if (res.data.code == 1) {\n          this.fileRoomIds.push(res.data.data.fileId);\n          this.$message(res.data.msg);\n        } else {\n          this.$message(res.data.msg);\n        }\n      });\n    },\n    handSuccess(response, file, fileList) {},\n    handleRemove(file, fileList) {\n      console.log(\"fileIds:\" + this.fileIds);\n    },\n    beforeRemove(file, fileList) {\n      var index = fileList.findIndex(item => item.url == file.url);\n      this.fileIds.splice(index, 1);\n    },\n    beforeRoomRemove(file, fileList) {\n      var index = fileList.findIndex(item => item.url == file.url);\n      this.fileRoomIds.splice(index, 1);\n    },\n    handlePictureCardPreview() {\n      console.log(1);\n    },\n    cancelForm() {\n      this.dialogroom = false;\n    }\n  }\n};","map":{"version":3,"names":["Pagination","axios","data","roomHotelId","formLabelWidth","dialogroom","dialogTableVisible","uploadFileUrl","HOST","fileIds","fileRoomIds","options","value","label","allmenu","nshow","fshow","loading","editFormVisible","title","editForm","name","address","rating","discount","minPrice","star","roomForm","roomId","hotelId","type","price","area","rules","required","message","trigger","formInline","page","limit","varLable","varName","departureAirport","arrivalAirport","seletedata","ids","token","localStorage","getItem","userparm","listData","roomListData","pageparm","currentPage","pageSize","total","components","created","start","Date","end","setTime","getTime","beginDate","endDate","getdata","methods","parameter","that","url","console","log","undefined","get","then","res","i","list","length","array","strs","split","html","flightId","flightNumber","departureTime","arrivalTime","company","images","push","callFather","parm","search","handleSelectionChange","selection","map","item","findEditRoom","index","row","roomarray","classId","cabin","roomimages","bookRoom","userid","paymentPassword","method","headers","buyerId","traditional","transformRequest","ret","it","encodeURIComponent","code","$message","msg","closeDialog","selectPicUpload","obj","fd","FormData","append","file","$axios","post","fileId","selectRoomPicUpload","handSuccess","response","fileList","handleRemove","beforeRemove","findIndex","splice","beforeRoomRemove","handlePictureCardPreview","cancelForm"],"sources":["src/views/hotelviews/flight/yhindex.vue"],"sourcesContent":["/**\r\n* 基础菜单 商品管理\r\n*/\r\n<template>\r\n  <div>\r\n    <!-- 面包屑导航 -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>航班管理</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <!-- 搜索筛选 -->\r\n    <el-form :inline=\"true\" :model=\"formInline\" class=\"user-search\">\r\n      <el-form-item label=\"出发地:\">\r\n        <el-input size=\"small\" v-model=\"formInline.departureAirport\" placeholder=\"输入出发地\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"目的地:\">\r\n        <el-input size=\"small\" v-model=\"formInline.arrivalAirport\" placeholder=\"输入目的地\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"起飞时间:\">\r\n        <el-date-picker v-model=\"formInline.beginDate\" type=\"datetime\" @blur=\"$forceUpdate()\" placeholder=\"选择日期\">\r\n        </el-date-picker>\r\n      </el-form-item>\r\n      <el-form-item label=\"到达时间:\">\r\n        <el-date-picker v-model=\"formInline.endDate\" type=\"datetime\" @blur=\"$forceUpdate()\" placeholder=\"选择日期\">\r\n        </el-date-picker>\r\n      </el-form-item>\r\n\r\n      <el-form-item>\r\n        <el-button size=\"small\" type=\"primary\" icon=\"el-icon-search\" @click=\"search\">搜索</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <!--列表-->\r\n    <el-table size=\"small\" :data=\"listData\" @selection-change=\"handleSelectionChange\" highlight-current-row\r\n              v-loading=\"loading\" border element-loading-text=\"拼命加载中\" style=\"width: 100%;\">\r\n      <el-table-column align=\"center\" type=\"selection\" width=\"60\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"flightId\" label=\"编号\" width=\"100\">\r\n        <template slot=\"header\" slot-scope=\"scope\">\r\n          <span style=\"color: #1f2d3d\">编号</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"company\" label=\"公司名称\" width=\"100\">\r\n        <template slot=\"header\" slot-scope=\"scope\">\r\n          <span style=\"color: #1f2d3d\">公司名称</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"flightNumber\" label=\"航班号\" width=\"100\">\r\n        <template slot=\"header\" slot-scope=\"scope\">\r\n          <span style=\"color: #1f2d3d\">航班号</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"departureTime\" label=\"出发时间\" width=\"100\">\r\n        <template slot=\"header\" slot-scope=\"scope\">\r\n          <span style=\"color: #1f2d3d\">出发时间</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column sortable prop=\"arrivalTime\" label=\"到达时间\" width=\"100\">\r\n        <template slot=\"header\" slot-scope=\"scope\">\r\n          <span style=\"color: #1f2d3d\">到达时间</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column sortable prop=\"departureAirport\" label=\"出发机场\" width=\"150\">\r\n        <template slot=\"header\" slot-scope=\"scope\">\r\n          <span style=\"color: #1f2d3d\">出发机场</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column sortable prop=\"arrivalAirport\" label=\"到达机场\" width=\"150\">\r\n        <template slot=\"header\" slot-scope=\"scope\">\r\n          <span style=\"color: #1f2d3d\">到达机场</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column sortable prop=\"discount\" label=\"是否折扣\" width=\"100\">\r\n        <template slot=\"header\" slot-scope=\"scope\">\r\n          <span style=\"color: #1f2d3d\">是否折扣</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column sortable prop=\"minPrice\" label=\"最低价格\" width=\"100\">\r\n        <template slot=\"header\" slot-scope=\"scope\">\r\n          <span style=\"color: #1f2d3d\">最低价格</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"images\" label=\"图片\" align=\"center\" width=\"150\">\r\n        <template slot=\"header\" slot-scope=\"scope\">\r\n          <span style=\"color: #1f2d3d\">图片</span>\r\n        </template>\r\n        <template slot-scope=\"scope\">\r\n          <el-image v-for=\"(item, index) in scope.row.images\" :key=\"index\" :src=\"item\" :preview-src-list=\"[item]\">\r\n          </el-image>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column align=\"center\" label=\"操作\" min-width=\"300\">\r\n        <template slot=\"header\" slot-scope=\"scope\">\r\n          <span style=\"color: #1f2d3d\">操作</span>\r\n        </template>\r\n        <template slot-scope=\"scope\">\r\n          <el-button size=\"mini\" @click=\"findEditRoom(scope.$index, scope.row)\">查看舱位</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!-- 分页组件 -->\r\n    <!-- <Pagination v-bind:child-msg=\"pageparm\" @callFather=\"callFather\"></Pagination> -->\r\n\r\n\r\n    <el-dialog title=\"房型列表\" :visible.sync=\"dialogTableVisible\" width=\"60%\">\r\n      <el-table :data=\"roomListData\">\r\n        <el-table-column property=\"classId\" label=\"编号\" width=\"100\">\r\n          <template slot=\"header\" slot-scope=\"scope\">\r\n            <span style=\"color: #1f2d3d\">编号</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column property=\"flightId\" label=\"航班编号\" width=\"100\">\r\n          <template slot=\"header\" slot-scope=\"scope\">\r\n            <span style=\"color: #1f2d3d\">航班编号</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column property=\"cabin\" label=\"客舱\" width=\"150\">\r\n          <template slot=\"header\" slot-scope=\"scope\">\r\n            <span style=\"color: #1f2d3d\">客舱</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column property=\"price\" label=\"价格\">\r\n          <template slot=\"header\" slot-scope=\"scope\">\r\n            <span style=\"color: #1f2d3d\">价格</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column property=\"discount\" label=\"折扣\">\r\n          <template slot=\"header\" slot-scope=\"scope\">\r\n            <span style=\"color: #1f2d3d\">折扣</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"roomimages\" label=\"舱位图片\" align=\"center\" width=\"150\">\r\n          <template slot=\"header\" slot-scope=\"scope\">\r\n            <span style=\"color: #1f2d3d\">舱位图片</span>\r\n          </template>\r\n          <template slot-scope=\"scope\">\r\n            <el-image v-for=\"(item, index) in scope.row.roomimages\" :key=\"index\" :src=\"item\" :preview-src-list=\"[item]\">\r\n            </el-image>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" label=\"操作\" min-width=\"300\">\r\n          <template slot=\"header\" slot-scope=\"scope\">\r\n            <span style=\"color: #1f2d3d\">操作</span>\r\n          </template>\r\n          <template slot-scope=\"scope\">\r\n            <el-button size=\"mini\" @click=\"bookRoom(scope.$index, scope.row)\">预订</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Pagination from '../../../components/Pagination';\r\nimport axios from \"axios\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      roomHotelId: '',\r\n      formLabelWidth: '100px',\r\n      dialogroom: false,\r\n      dialogTableVisible: false, //房间弹窗\r\n      uploadFileUrl: this.HOST + \"/hotel/upload\", // 上传文件服务器地址\r\n      fileIds: [],\r\n      fileRoomIds: [],\r\n      options: [{\r\n        value: '0',\r\n        label: '有折扣'\r\n      }, {\r\n        value: '1',\r\n        label: '无折扣'\r\n      }],\r\n      allmenu: [],\r\n      data: [],\r\n      nshow: true, //switch开启\r\n      fshow: false, //switch关闭\r\n      loading: false, //是显示加载\r\n      editFormVisible: false, //控制编辑页面显示与隐藏\r\n      title: '添加',\r\n      editForm: {\r\n        name: '',\r\n        address: '',\r\n        rating: 0,\r\n        discount: '0',\r\n        minPrice: 0,\r\n        star: 0,\r\n        // fileIds: ''\r\n      },\r\n      roomForm: {\r\n        roomId: '',\r\n        hotelId: '',\r\n        type: '',\r\n        price: 0,\r\n        discount: '0',\r\n        area: 0,\r\n      },\r\n      // rules表单验证\r\n      rules: {\r\n        name: [{\r\n          required: true,\r\n          message: '请输入酒店名称',\r\n          trigger: 'blur'\r\n        }],\r\n        address: [{\r\n          required: true,\r\n          message: '请输入酒店地址',\r\n          trigger: 'blur'\r\n        }],\r\n        // rating: [{\r\n        //   required: true,\r\n        //   message: '请点击选择评分',\r\n        //   trigger: 'blur'\r\n        // }],\r\n        minPrice: [{\r\n          required: true,\r\n          message: '请输入最低价格',\r\n          trigger: 'blur'\r\n        }]\r\n      },\r\n      formInline: {\r\n        page: 1,\r\n        limit: 10,\r\n        varLable: '',\r\n        varName: '',\r\n        departureAirport: '',\r\n        arrivalAirport: '',\r\n      },\r\n      // 删除部门\r\n      seletedata: {\r\n        ids: '',\r\n        token: localStorage.getItem('logintoken')\r\n      },\r\n      userparm: [], //搜索权限\r\n      listData: [], //酒店数据\r\n      roomListData: [], //房间数据\r\n      // 分页参数\r\n      pageparm: {\r\n        currentPage: 1,\r\n        pageSize: 10,\r\n        total: 10\r\n      }\r\n    }\r\n  },\r\n  // 注册组件\r\n  components: {\r\n    Pagination\r\n  },\r\n  /**\r\n   * 数据发生改变\r\n   */\r\n\r\n  /**\r\n   * 创建完毕\r\n   */\r\n  created() {\r\n    const start = new Date(); //获取当前的日期\r\n    const end = new Date(); //获取当前的日期\r\n    start.setTime(start.getTime())\r\n    end.setTime(end.getTime() + 3600 * 1000 * 24 * 3)\r\n    // this.formInline.beginDate = this.dateFormat(start);\r\n    // this.formInline.endDate = this.dateFormat(end);\r\n    this.formInline.beginDate = start;\r\n    this.formInline.endDate = end;\r\n    this.getdata(this.formInline);\r\n\r\n  },\r\n\r\n  /**\r\n   * 里面的方法只有被调用才会执行\r\n   */\r\n  methods: {\r\n    // dateFormat(dateData) {\r\n    //   var date = new Date(dateData)\r\n    //   var y = date.getFullYear()\r\n    //   var m = date.getMonth() + 1\r\n    //   m = m < 10 ? ('0' + m) : m\r\n    //   var d = date.getDate()\r\n    //   d = d < 10 ? ('0' + d) : d\r\n    //   const time = y + '-' + m + '-' + d\r\n    //   return time\r\n    // },\r\n    // 获取酒店列表\r\n    getdata(parameter) {\r\n\r\n      this.loading = true;\r\n      var that = this;\r\n      that.listData = [];\r\n      var url = '';\r\n      var name = that.formInline.departureAirport;\r\n      var address = that.formInline.arrivalAirport;\r\n      console.log(that.formInline.beginDate,that.formInline.endDate)\r\n      if (name == \"\" || name == null || name == undefined) {\r\n        if (address == \"\" || address == null || address == undefined) {\r\n          url = this.HOST + '/flight/list1?beginDate='+that.formInline.beginDate + '&endDate='+that.formInline.endDate;\r\n        } else {\r\n          url = this.HOST + '/flight/list1?arrivalAirport=' + that.formInline.arrivalAirport+'&beginDate='+that.formInline.beginDate + '&endDate='+that.formInline.endDate;\r\n        }\r\n      } else {\r\n        if (address == \"\" || address == null || address == undefined) {\r\n          url = this.HOST + '/flight/list1?departureAirport=' + that.formInline.departureAirport+'&beginDate='+that.formInline.beginDate + '&endDate='+that.formInline.endDate;\r\n        } else {\r\n          url = this.HOST + '/flight/list1?departureAirport=' + that.formInline.departureAirport + '&arrivalAirport=' + that.formInline.arrivalAirport+'&beginDate='+that.formInline.beginDate + '&endDate='+that.formInline.endDate;\r\n        }\r\n      }\r\n      //url = this.HOST + '/flight/list1?beginDate=' + that.formInline.beginDate + '&endDate=' + that.formInline.endDate;\r\n      axios.get(url).then(res => {\r\n        for (var i = 0; i < res.data.list.length; i++) {\r\n\r\n          var array = [];\r\n          var strs = res.data.list[i].fileIds;\r\n          if (strs != \"\" && strs != null && strs != undefined) {\r\n            array = strs.split(',');\r\n          }\r\n          var html = {\r\n            flightId: res.data.list[i].flightId,\r\n            flightNumber: res.data.list[i].flightNumber,\r\n            departureTime: res.data.list[i].departureTime,\r\n            arrivalTime: res.data.list[i].arrivalTime,\r\n            departureAirport: res.data.list[i].departureAirport,\r\n            arrivalAirport: res.data.list[i].arrivalAirport,\r\n            minPrice: res.data.list[i].minPrice,\r\n            discount: res.data.list[i].discount,\r\n            company: res.data.list[i].company,\r\n            images: array,\r\n            // names: res.data.list[i].names,\r\n            // urls: res.data.list[i].fileIds\r\n          };\r\n          that.listData.push(html);\r\n        }\r\n        this.loading = false;\r\n      });\r\n\r\n    },\r\n    // 分页插件事件\r\n    callFather(parm) {\r\n      this.formInline.page = parm.currentPage\r\n      this.formInline.limit = parm.pageSize\r\n      this.getdata(this.formInline)\r\n    },\r\n    // 搜索事件\r\n    search() {\r\n      this.getdata(this.formInline)\r\n    },\r\n    handleSelectionChange(selection) {\r\n      this.ids = selection.map(item => item.hotelId);\r\n      console.log(\"this.ids:\" + this.ids);\r\n    },\r\n\r\n    findEditRoom: function(index, row) {\r\n      this.dialogTableVisible = true;\r\n      this.roomListData = [];\r\n      axios.get(this.HOST + '/flightClass/list?flightId=' + row.flightId).then(res => {\r\n        for (var i = 0; i < res.data.list.length; i++) {\r\n          var roomarray = [];\r\n          var strs = res.data.list[i].fileIds;\r\n          if (strs != \"\" && strs != null && strs != undefined) {\r\n            roomarray = strs.split(',');\r\n          }\r\n          var html = {\r\n            classId: res.data.list[i].classId,\r\n            flightId: res.data.list[i].flightId,\r\n            cabin: res.data.list[i].cabin,\r\n            price: res.data.list[i].price,\r\n            discount: res.data.list[i].discount,\r\n            roomimages: roomarray\r\n          };\r\n          this.roomListData.push(html);\r\n        }\r\n        this.roomHotelId = row.flightId;\r\n        this.loading = false;\r\n      });\r\n    },\r\n    bookRoom: function(index, row) {\r\n      var userid = localStorage.getItem('userid');\r\n      var paymentPassword = localStorage.getItem('userpaymentpassword');\r\n      var classId = row.classId;\r\n      console.log(\"1111:\" + userid, paymentPassword, classId)\r\n      axios({\r\n        method: 'post',\r\n        url: this.HOST + '/order/createFlightOrder',\r\n        headers: {\r\n          'Content-Type': 'application/x-www-form-urlencoded'\r\n        },\r\n        data: {\r\n          buyerId: userid,\r\n          paymentPassword: paymentPassword,\r\n          classId: classId,\r\n          beginDate: this.formInline.beginDate,\r\n          endDate: this.formInline.endDate\r\n        },\r\n        traditional: true,\r\n        transformRequest: [\r\n          function(data) {\r\n            let ret = ''\r\n            for (let it in data) {\r\n              ret +=\r\n                  encodeURIComponent(it) +\r\n                  '=' +\r\n                  encodeURIComponent(data[it]) +\r\n                  '&'\r\n            }\r\n            return ret\r\n          }\r\n        ]\r\n      }).then(res => {\r\n        this.editFormVisible = false;\r\n\r\n        this.getdata(this.formInline)\r\n        if (res.data.code == 1) {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '预订成功！'\r\n          })\r\n        } else {\r\n          this.$message({\r\n            type: 'success',\r\n            message: res.data.msg\r\n          })\r\n        }\r\n\r\n      });\r\n    },\r\n    // 关闭编辑、增加弹出框\r\n    closeDialog() {\r\n      this.editFormVisible = false\r\n    },\r\n    // 上传图片\r\n    selectPicUpload(obj) {\r\n      let fd = new FormData(); //参数的格式是formData格式的\r\n      fd.append(\"file\", obj.file); //参数\r\n      fd.append(\"path\", \"train\");\r\n      this.$axios.post(this.HOST + \"/hotel/upload\", fd).then((res) => {\r\n        console.log(res.data.msg);\r\n        if (res.data.code == 1) {\r\n          this.fileIds.push(res.data.data.fileId);\r\n          this.$message(res.data.msg);\r\n        } else {\r\n          this.$message(res.data.msg);\r\n        }\r\n      });\r\n    },\r\n    // 房型上传图片\r\n    selectRoomPicUpload(obj) {\r\n      let fd = new FormData(); //参数的格式是formData格式的\r\n      fd.append(\"file\", obj.file); //参数\r\n      fd.append(\"path\", \"train\");\r\n      this.$axios.post(this.HOST + \"/hotel/upload\", fd).then((res) => {\r\n        console.log(res.data.msg);\r\n        if (res.data.code == 1) {\r\n          this.fileRoomIds.push(res.data.data.fileId);\r\n          this.$message(res.data.msg);\r\n        } else {\r\n          this.$message(res.data.msg);\r\n        }\r\n      });\r\n    },\r\n    handSuccess(response, file, fileList) {},\r\n    handleRemove(file, fileList) {\r\n      console.log(\"fileIds:\" + this.fileIds)\r\n\r\n    },\r\n    beforeRemove(file, fileList) {\r\n      var index = fileList.findIndex((item) => item.url == file.url);\r\n      this.fileIds.splice(index, 1);\r\n    },\r\n    beforeRoomRemove(file, fileList) {\r\n      var index = fileList.findIndex((item) => item.url == file.url);\r\n      this.fileRoomIds.splice(index, 1);\r\n    },\r\n    handlePictureCardPreview() {\r\n      console.log(1)\r\n    },\r\n    cancelForm() {\r\n      this.dialogroom = false;\r\n    }\r\n\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.user-search {\r\n  margin-top: 20px;\r\n}\r\n\r\n.userRole {\r\n  width: 100%;\r\n}\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}