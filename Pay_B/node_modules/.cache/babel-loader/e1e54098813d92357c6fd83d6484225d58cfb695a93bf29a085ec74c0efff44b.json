{"ast":null,"code":"import Vue from 'vue';\nimport App from './App.vue';\nimport ElementUI from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\nimport Plugin from 'v-fit-columns';\nimport router from './router';\nimport './assets/icon/iconfont.css';\n\n// 引入echarts\nimport echarts from 'echarts';\nVue.prototype.$echarts = echarts;\nVue.config.productionTip = false;\nVue.prototype.HOST = 'http://localhost:80';\nVue.prototype.$axios = axios;\naxios.interceptors.request.use(config => {\n  console.log(config);\n  config.headers.Authorization = window.sessionStorage.getItem('token');\n  return config;\n});\n\n// 过滤器\nimport * as custom from './utils/util';\nimport store from \"@/vuex/store\";\nimport axios from \"axios\";\nObject.keys(custom).forEach(key => {\n  Vue.filter(key, custom[key]);\n});\nrouter.beforeEach((to, from, next) => {\n  if (to.matched.length != 0) {\n    if (to.meta.requireAuth) {\n      // 判断该路由是否需要登录权限\n      if (Boolean(localStorage.getItem(\"userInfo\"))) {\n        // 通过vuex state获取当前的user是否存在\n        next();\n      } else {\n        next({\n          path: '/manager',\n          query: {\n            redirect: to.fullPath\n          } // 将跳转的路由path作为参数，登录成功后跳转到该路由\n        });\n      }\n    } else {\n      if (Boolean(localStorage.getItem(\"userInfo\"))) {\n        // 判断是否登录\n        if (to.path !== \"/\" && to.path !== \"/manager\") {\n          //判断是否要跳到登录界面\n          next();\n        } else {\n          /**\r\n           * 防刷新，如果登录，修改路由跳转到登录页面，修改路由为登录后的首页\r\n           */\n          next({\n            path: '/recon'\n          });\n        }\n      } else {\n        next();\n      }\n    }\n  } else {\n    next({\n      path: '/recon',\n      query: {\n        redirect: to.fullPath\n      } // 将跳转的路由path作为参数，登录成功后跳转到该路由\n    });\n  }\n});\n\nVue.use(Plugin);\nVue.use(ElementUI);\nnew Vue({\n  el: '#app',\n  router,\n  store,\n  render: h => h(App)\n});","map":{"version":3,"names":["Vue","App","ElementUI","Plugin","router","echarts","prototype","$echarts","config","productionTip","HOST","$axios","axios","interceptors","request","use","console","log","headers","Authorization","window","sessionStorage","getItem","custom","store","Object","keys","forEach","key","filter","beforeEach","to","from","next","matched","length","meta","requireAuth","Boolean","localStorage","path","query","redirect","fullPath","el","render","h"],"sources":["E:/软件质量保证与测试/作业1/payment/Pay_B/src/main.js"],"sourcesContent":["import Vue from 'vue';\r\nimport App from './App.vue';\r\nimport ElementUI from 'element-ui';\r\nimport 'element-ui/lib/theme-chalk/index.css';\r\nimport Plugin from 'v-fit-columns';\r\nimport router from './router';\r\nimport './assets/icon/iconfont.css'\r\n\r\n// 引入echarts\r\nimport echarts from 'echarts'\r\nVue.prototype.$echarts = echarts\r\n\r\nVue.config.productionTip = false;\r\n\r\nVue.prototype.HOST = 'http://localhost:80';\r\nVue.prototype.$axios = axios;\r\n\r\naxios.interceptors.request.use(config=>{\r\n  console.log(config)\r\n  config.headers.Authorization=window.sessionStorage.getItem('token')\r\n  return config\r\n})\r\n\r\n\r\n// 过滤器\r\nimport * as custom from './utils/util'\r\nimport store from \"@/vuex/store\";\r\nimport axios from \"axios\";\r\nObject.keys(custom).forEach(key => {\r\n  Vue.filter(key, custom[key])\r\n})\r\nrouter.beforeEach((to, from, next) => {\r\n  if (to.matched.length != 0) {\r\n    if (to.meta.requireAuth) { // 判断该路由是否需要登录权限\r\n      if (Boolean(localStorage.getItem(\"userInfo\"))) { // 通过vuex state获取当前的user是否存在\r\n        next();\r\n      } else {\r\n        next({\r\n          path: '/manager',\r\n          query: { redirect: to.fullPath } // 将跳转的路由path作为参数，登录成功后跳转到该路由\r\n        })\r\n      }\r\n    } else {\r\n      if (Boolean(localStorage.getItem(\"userInfo\"))) { // 判断是否登录\r\n        if (to.path !== \"/\" && to.path !== \"/manager\") { //判断是否要跳到登录界面\r\n          next();\r\n        } else {\r\n          /**\r\n           * 防刷新，如果登录，修改路由跳转到登录页面，修改路由为登录后的首页\r\n           */\r\n          next({\r\n            path: '/recon'\r\n          })\r\n        }\r\n      } else {\r\n        next();\r\n      }\r\n    }\r\n  } else {\r\n    next({\r\n      path: '/recon',\r\n      query: { redirect: to.fullPath } // 将跳转的路由path作为参数，登录成功后跳转到该路由\r\n    })\r\n  }\r\n})\r\n\r\nVue.use(Plugin);\r\nVue.use(ElementUI);\r\n\r\nnew Vue({\r\n  el: '#app',\r\n  router,\r\n  store,\r\n  render: h => h(App)\r\n});\r\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,GAAG,MAAM,WAAW;AAC3B,OAAOC,SAAS,MAAM,YAAY;AAClC,OAAO,sCAAsC;AAC7C,OAAOC,MAAM,MAAM,eAAe;AAClC,OAAOC,MAAM,MAAM,UAAU;AAC7B,OAAO,4BAA4B;;AAEnC;AACA,OAAOC,OAAO,MAAM,SAAS;AAC7BL,GAAG,CAACM,SAAS,CAACC,QAAQ,GAAGF,OAAO;AAEhCL,GAAG,CAACQ,MAAM,CAACC,aAAa,GAAG,KAAK;AAEhCT,GAAG,CAACM,SAAS,CAACI,IAAI,GAAG,qBAAqB;AAC1CV,GAAG,CAACM,SAAS,CAACK,MAAM,GAAGC,KAAK;AAE5BA,KAAK,CAACC,YAAY,CAACC,OAAO,CAACC,GAAG,CAACP,MAAM,IAAE;EACrCQ,OAAO,CAACC,GAAG,CAACT,MAAM,CAAC;EACnBA,MAAM,CAACU,OAAO,CAACC,aAAa,GAACC,MAAM,CAACC,cAAc,CAACC,OAAO,CAAC,OAAO,CAAC;EACnE,OAAOd,MAAM;AACf,CAAC,CAAC;;AAGF;AACA,OAAO,KAAKe,MAAM,MAAM,cAAc;AACtC,OAAOC,KAAK,MAAM,cAAc;AAChC,OAAOZ,KAAK,MAAM,OAAO;AACzBa,MAAM,CAACC,IAAI,CAACH,MAAM,CAAC,CAACI,OAAO,CAACC,GAAG,IAAI;EACjC5B,GAAG,CAAC6B,MAAM,CAACD,GAAG,EAAEL,MAAM,CAACK,GAAG,CAAC,CAAC;AAC9B,CAAC,CAAC;AACFxB,MAAM,CAAC0B,UAAU,CAAC,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EACpC,IAAIF,EAAE,CAACG,OAAO,CAACC,MAAM,IAAI,CAAC,EAAE;IAC1B,IAAIJ,EAAE,CAACK,IAAI,CAACC,WAAW,EAAE;MAAE;MACzB,IAAIC,OAAO,CAACC,YAAY,CAACjB,OAAO,CAAC,UAAU,CAAC,CAAC,EAAE;QAAE;QAC/CW,IAAI,CAAC,CAAC;MACR,CAAC,MAAM;QACLA,IAAI,CAAC;UACHO,IAAI,EAAE,UAAU;UAChBC,KAAK,EAAE;YAAEC,QAAQ,EAAEX,EAAE,CAACY;UAAS,CAAC,CAAC;QACnC,CAAC,CAAC;MACJ;IACF,CAAC,MAAM;MACL,IAAIL,OAAO,CAACC,YAAY,CAACjB,OAAO,CAAC,UAAU,CAAC,CAAC,EAAE;QAAE;QAC/C,IAAIS,EAAE,CAACS,IAAI,KAAK,GAAG,IAAIT,EAAE,CAACS,IAAI,KAAK,UAAU,EAAE;UAAE;UAC/CP,IAAI,CAAC,CAAC;QACR,CAAC,MAAM;UACL;AACV;AACA;UACUA,IAAI,CAAC;YACHO,IAAI,EAAE;UACR,CAAC,CAAC;QACJ;MACF,CAAC,MAAM;QACLP,IAAI,CAAC,CAAC;MACR;IACF;EACF,CAAC,MAAM;IACLA,IAAI,CAAC;MACHO,IAAI,EAAE,QAAQ;MACdC,KAAK,EAAE;QAAEC,QAAQ,EAAEX,EAAE,CAACY;MAAS,CAAC,CAAC;IACnC,CAAC,CAAC;EACJ;AACF,CAAC,CAAC;;AAEF3C,GAAG,CAACe,GAAG,CAACZ,MAAM,CAAC;AACfH,GAAG,CAACe,GAAG,CAACb,SAAS,CAAC;AAElB,IAAIF,GAAG,CAAC;EACN4C,EAAE,EAAE,MAAM;EACVxC,MAAM;EACNoB,KAAK;EACLqB,MAAM,EAAEC,CAAC,IAAIA,CAAC,CAAC7C,GAAG;AACpB,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}