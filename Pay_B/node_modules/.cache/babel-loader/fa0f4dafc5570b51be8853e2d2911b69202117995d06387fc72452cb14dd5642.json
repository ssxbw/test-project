{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\n//import {Message} from \"element-ui\";\n\nexport default {\n  data() {\n    return {\n      modifyForm: {\n        key1: '',\n        old_key: '',\n        key2: ''\n      }\n    };\n  },\n  methods: {\n    Modify() {\n      if (!this.modifyForm.key1 || !this.modifyForm.old_key || !this.modifyForm.key2) {\n        this.$message.error('请输入完整密码信息！');\n        return;\n      }\n      if (this.modifyForm.key1 !== this.modifyForm.key2) {\n        this.$message.error('两次输入的密码不一致，请重新输入！');\n        return;\n      }\n      axios.defaults.baseURL = 'http://localhost:80';\n      axios.post('/admin/modify', {\n        \"old_key\": this.modifyForm.old_key,\n        \"key1\": this.modifyForm.key1,\n        \"key2\": this.modifyForm.key2\n      }, {\n        headers: {\n          'Access-Control-Allow-Origin': '*',\n          //解决cors头问题\n          'Access-Control-Allow-Credentials': 'true' //解决session问题\n        }\n      }).then(response => {\n        if (String(response.data.code) === \"1\") {\n          this.$message.success(response.data.msg);\n          window.sessionStorage.clear();\n          this.$router.push(\"/manager\");\n        } else {\n          this.$message.error(response.data.msg);\n        }\n      }, error => {\n        console.log('错误', error.message);\n      });\n    },\n    resetModifyForm() {\n      this.$refs.modifyFormRef.resetFields();\n    }\n  }\n};","map":{"version":3,"names":["axios","data","modifyForm","key1","old_key","key2","methods","Modify","$message","error","defaults","baseURL","post","headers","then","response","String","code","success","msg","window","sessionStorage","clear","$router","push","console","log","message","resetModifyForm","$refs","modifyFormRef","resetFields"],"sources":["src/views/manager_views/manager/modify.vue"],"sourcesContent":["\r\n<template>\r\n    <div class=\"modify_container\">\r\n        <el-breadcrumb separator=\"/\" class=\"mianbaoxie\">\r\n            <el-breadcrumb-item :to=\"{ path: '/system' }\">首页</el-breadcrumb-item>\r\n            <el-breadcrumb-item>修改密码</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n        <div class=\"modify_box\">\r\n            <div class=\"modify_title\">\r\n                修改密码\r\n            </div>\r\n            <el-form\r\n                ref=\"modifyFormRef\"\r\n                :model=\"modifyForm\"\r\n                label-width=\"0px\"\r\n                class=\"modify_form\">\r\n                <el-form-item prop=\"old_key\">\r\n                    <el-input\r\n                        v-model=\"modifyForm.old_key\"\r\n                        type=\"password\"\r\n                        prefix-icon=\"\"\r\n                        placeholder=\"请输入原密码\">\r\n                    </el-input>\r\n                </el-form-item>\r\n                <el-form-item prop=\"key1\">\r\n                    <el-input\r\n                        v-model=\"modifyForm.key1\"\r\n                        prefix-icon=\"\"\r\n                        type=\"password\"\r\n                        placeholder=\"请输入新密码\">\r\n                    </el-input>\r\n                </el-form-item>\r\n                <el-form-item prop=\"key2\">\r\n                    <el-input\r\n                        v-model=\"modifyForm.key2\"\r\n                        prefix-icon=\"\"\r\n                        type=\"password\"\r\n                        placeholder=\"请再次输入新密码\">\r\n                    </el-input>\r\n                </el-form-item>\r\n                <el-form-item class=\"btns\">\r\n                    <el-button type=\"primary\" @click=\"Modify\">修改</el-button>\r\n                    <el-button @click=\"resetModifyForm\">重置</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<style>\r\n.modify_container{\r\n    background-color: #EAEDF1;\r\n    height:100%;\r\n}\r\n.modify_box{\r\n    width: 600px;\r\n    height: 400px;\r\n    background-color: #fff;\r\n    border-radius: 3px;\r\n    box-shadow: 0px 5px 20px #999;\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 55%;\r\n    transform: translate(-50%, -50%);\r\n}\r\n.modify_title{\r\n    position: absolute;\r\n    left: 50%;\r\n    top:20%;\r\n    transform: translate(-50%,-50%);\r\n    text-align: center;\r\n    color: #333;\r\n    text-shadow: 2px 2px #ddd;\r\n    font-size: 36px;\r\n    font-weight: bold;\r\n}\r\n.btns{\r\n    display:flex;\r\n    justify-content: flex-end;\r\n}\r\n.modify_form{\r\n    position: absolute;\r\n    bottom: 0;\r\n    width: 100%;\r\n    padding: 0 80px;\r\n    box-sizing: border-box;\r\n}\r\n</style>\r\n<script>\r\nimport axios from \"axios\";\r\n//import {Message} from \"element-ui\";\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            modifyForm: {\r\n                key1: '',\r\n                old_key: '',\r\n                key2: '',\r\n            },\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        Modify() {\r\n\r\n\r\n            if (!this.modifyForm.key1 || !this.modifyForm.old_key || !this.modifyForm.key2) {\r\n                this.$message.error('请输入完整密码信息！');\r\n                return;\r\n            }\r\n            if (this.modifyForm.key1 !== this.modifyForm.key2) {\r\n                this.$message.error('两次输入的密码不一致，请重新输入！');\r\n                return;\r\n            }\r\n\r\n\r\n            axios.defaults.baseURL='http://localhost:80'\r\n            axios.post('/admin/modify',{\r\n                    \"old_key\":this.modifyForm.old_key,\r\n                    \"key1\":this.modifyForm.key1,\r\n                    \"key2\":this.modifyForm.key2\r\n                },\r\n                {\r\n                    headers:{\r\n                        'Access-Control-Allow-Origin':'*', //解决cors头问题\r\n                        'Access-Control-Allow-Credentials':'true', //解决session问题\r\n                    }\r\n                }\r\n            ).then(response=>{\r\n\r\n\r\n                if(String(response.data.code)===\"1\"){\r\n                    this.$message.success(response.data.msg);\r\n                    window.sessionStorage.clear();\r\n                    this.$router.push(\"/manager\");\r\n                }\r\n                else {\r\n                    this.$message.error(response.data.msg);\r\n                }\r\n            },error=>{\r\n                console.log('错误',error.message)\r\n            })\r\n\r\n        },\r\n        resetModifyForm() {\r\n            this.$refs.modifyFormRef.resetFields();\r\n        }\r\n    }\r\n}\r\n</script>"],"mappings":";AAyFA,OAAAA,KAAA;AACA;;AAEA;EACAC,KAAA;IACA;MACAC,UAAA;QACAC,IAAA;QACAC,OAAA;QACAC,IAAA;MACA;IACA;EACA;EAEAC,OAAA;IACAC,OAAA;MAGA,UAAAL,UAAA,CAAAC,IAAA,UAAAD,UAAA,CAAAE,OAAA,UAAAF,UAAA,CAAAG,IAAA;QACA,KAAAG,QAAA,CAAAC,KAAA;QACA;MACA;MACA,SAAAP,UAAA,CAAAC,IAAA,UAAAD,UAAA,CAAAG,IAAA;QACA,KAAAG,QAAA,CAAAC,KAAA;QACA;MACA;MAGAT,KAAA,CAAAU,QAAA,CAAAC,OAAA;MACAX,KAAA,CAAAY,IAAA;QACA,gBAAAV,UAAA,CAAAE,OAAA;QACA,aAAAF,UAAA,CAAAC,IAAA;QACA,aAAAD,UAAA,CAAAG;MACA,GACA;QACAQ,OAAA;UACA;UAAA;UACA;QACA;MACA,CACA,EAAAC,IAAA,CAAAC,QAAA;QAGA,IAAAC,MAAA,CAAAD,QAAA,CAAAd,IAAA,CAAAgB,IAAA;UACA,KAAAT,QAAA,CAAAU,OAAA,CAAAH,QAAA,CAAAd,IAAA,CAAAkB,GAAA;UACAC,MAAA,CAAAC,cAAA,CAAAC,KAAA;UACA,KAAAC,OAAA,CAAAC,IAAA;QACA,OACA;UACA,KAAAhB,QAAA,CAAAC,KAAA,CAAAM,QAAA,CAAAd,IAAA,CAAAkB,GAAA;QACA;MACA,GAAAV,KAAA;QACAgB,OAAA,CAAAC,GAAA,OAAAjB,KAAA,CAAAkB,OAAA;MACA;IAEA;IACAC,gBAAA;MACA,KAAAC,KAAA,CAAAC,aAAA,CAAAC,WAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}