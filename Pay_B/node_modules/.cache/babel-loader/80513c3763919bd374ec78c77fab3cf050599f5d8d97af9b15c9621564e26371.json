{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      loginForm: {\n        name: '',\n        key: ''\n      }\n    };\n  },\n  methods: {\n    reset_form() {\n      this.loginForm.key = '';\n      this.loginForm.name = '';\n      //this.$refs.loginFormRef.resetFields();\n    },\n\n    login: function () {\n      /*\r\n                  window.sessionStorage.setItem(\"token\",'132')\r\n                  const{name,key}=this.loginForm;\r\n                  this.$router.push({\r\n                      path:'/system',\r\n                      query:{name,key}\r\n                  });*/\n\n      axios.defaults.baseURL = 'http://localhost:80';\n      axios.post('/admin/login', {\n        \"name\": this.loginForm.name,\n        \"key\": this.loginForm.key\n      }).then(response => {\n        if (String(response.data.code) === \"1\") {\n          if (response.data.data.token) {\n            document.cookie = \"token=\" + response.data.data.token + \";\";\n            window.sessionStorage.setItem(\"token\", response.data.data.token);\n          }\n          if (response.data.data.managerType === \"system\") {\n            const {\n              name,\n              key\n            } = this.loginForm;\n            this.$router.push({\n              path: '/system',\n              query: {\n                name\n              }\n            });\n          } else if (response.data.data.managerType === \"book\") {\n            this.$store.commit('login', 'true');\n            localStorage.setItem('username', response.data.data.managerId);\n            localStorage.setItem('usertype', 'S');\n            console.log(localStorage.getItem('username'));\n            this.$router.push({\n              path: '/hotel'\n            });\n          } else if (response.data.data.managerType === \"check\") {\n            this.$router.push({\n              path: '/recon'\n            });\n          }\n        } else {\n          this.$message.error(response.data.msg);\n        }\n      }, error => {\n        console.log('错误', error.message);\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","data","loginForm","name","key","methods","reset_form","login","defaults","baseURL","post","then","response","String","code","token","document","cookie","window","sessionStorage","setItem","managerType","$router","push","path","query","$store","commit","localStorage","managerId","console","log","getItem","$message","error","msg","message"],"sources":["src/views/manager_views/login.vue"],"sourcesContent":["<template>\r\n    <div class=\"login_container\">\r\n        <div class=\"login_box\">\r\n            <div class=\"login_title\">\r\n                管理员登录\r\n            </div>\r\n            <el-form ref=\"loginFormRef\" :model=\"loginForm\" label-width=\"0px\" class=\"login_form\">\r\n                <el-form-item>\r\n                    <el-input v-model=\"loginForm.name\" prefix-icon=\"\" placeholder=\"请输入用户名\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-input v-model=\"loginForm.key\" prefix-icon=\"\" type=\"password\" placeholder=\"请输入密码\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item class=\"btns\">\r\n                    <el-button type=\"primary\" @click=\"login\">登录</el-button>\r\n                    <el-button type=\"info\" @click=\"reset_form\">重置</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<style>\r\n.login_container{\r\n    background-color: #2b4b6b;\r\n    height:100%;\r\n}\r\n.login_box{\r\n    width: 400px;\r\n    height: 300px;\r\n    background-color: #fff;\r\n    border-radius: 3px;\r\n    box-shadow: 0px 5px 20px #999;\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 50%;\r\n    transform: translate(-50%, -50%);\r\n}\r\n.login_title{\r\n    position: absolute;\r\n    left: 50%;\r\n    top:20%;\r\n    transform: translate(-50%,-50%);\r\n    text-align: center;\r\n    color: #333;\r\n    text-shadow: 2px 2px #ddd;\r\n    font-size: 36px;\r\n    font-weight: bold;\r\n}\r\n.btns{\r\n    display:flex;\r\n    justify-content: flex-end;\r\n}\r\n.login_form{\r\n    position: absolute;\r\n    bottom: 0;\r\n    width: 100%;\r\n    padding: 0 80px;\r\n    box-sizing: border-box;\r\n}\r\n</style>\r\n<script>\r\nimport axios from \"axios\";\r\n\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            loginForm: {\r\n                name: '',\r\n                key: '',\r\n            },\r\n        };\r\n    },\r\n    methods: {\r\n        reset_form() {\r\n            this.loginForm.key='';\r\n            this.loginForm.name='';\r\n            //this.$refs.loginFormRef.resetFields();\r\n        },\r\n        login:function (){\r\n/*\r\n            window.sessionStorage.setItem(\"token\",'132')\r\n            const{name,key}=this.loginForm;\r\n            this.$router.push({\r\n                path:'/system',\r\n                query:{name,key}\r\n            });*/\r\n\r\n            axios.defaults.baseURL='http://localhost:80'\r\n            axios.post('/admin/login',{\r\n\r\n                \"name\":this.loginForm.name,\r\n                \"key\":this.loginForm.key\r\n            }).then(response=>{\r\n\r\n                if(String(response.data.code)===\"1\"){\r\n\r\n                    if(response.data.data.token){\r\n                        document.cookie=\"token=\"+response.data.data.token+\";\"\r\n                        window.sessionStorage.setItem(\"token\",response.data.data.token)\r\n                    }\r\n                    if(response.data.data.managerType===\"system\") {\r\n                        const {name, key} = this.loginForm;\r\n                        this.$router.push({\r\n                            path: '/system',\r\n                            query: {name}\r\n                        });\r\n                    }\r\n                    else if(response.data.data.managerType===\"book\")\r\n                    {\r\n                        this.$store.commit('login', 'true')\r\n                        localStorage.setItem('username', response.data.data.managerId)\r\n                        localStorage.setItem('usertype', 'S')\r\n                        console.log(localStorage.getItem('username'))\r\n                        this.$router.push({\r\n                            path: '/hotel',\r\n                        });\r\n                    }\r\n                    else if(response.data.data.managerType===\"check\")\r\n                    {\r\n                        this.$router.push({\r\n                            path: '/recon',\r\n                        });\r\n                    }\r\n\r\n                }\r\n                else\r\n                {\r\n                    this.$message.error(response.data.msg);\r\n                }\r\n            },error=>{\r\n                console.log('错误',error.message)\r\n            })\r\n        }\r\n    },\r\n}\r\n</script>\r\n"],"mappings":";AA8DA,OAAAA,KAAA;AAGA;EACAC,KAAA;IACA;MACAC,SAAA;QACAC,IAAA;QACAC,GAAA;MACA;IACA;EACA;EACAC,OAAA;IACAC,WAAA;MACA,KAAAJ,SAAA,CAAAE,GAAA;MACA,KAAAF,SAAA,CAAAC,IAAA;MACA;IACA;;IACAI,KAAA,WAAAA,CAAA;MACA;AACA;AACA;AACA;AACA;AACA;AACA;;MAEAP,KAAA,CAAAQ,QAAA,CAAAC,OAAA;MACAT,KAAA,CAAAU,IAAA;QAEA,aAAAR,SAAA,CAAAC,IAAA;QACA,YAAAD,SAAA,CAAAE;MACA,GAAAO,IAAA,CAAAC,QAAA;QAEA,IAAAC,MAAA,CAAAD,QAAA,CAAAX,IAAA,CAAAa,IAAA;UAEA,IAAAF,QAAA,CAAAX,IAAA,CAAAA,IAAA,CAAAc,KAAA;YACAC,QAAA,CAAAC,MAAA,cAAAL,QAAA,CAAAX,IAAA,CAAAA,IAAA,CAAAc,KAAA;YACAG,MAAA,CAAAC,cAAA,CAAAC,OAAA,UAAAR,QAAA,CAAAX,IAAA,CAAAA,IAAA,CAAAc,KAAA;UACA;UACA,IAAAH,QAAA,CAAAX,IAAA,CAAAA,IAAA,CAAAoB,WAAA;YACA;cAAAlB,IAAA;cAAAC;YAAA,SAAAF,SAAA;YACA,KAAAoB,OAAA,CAAAC,IAAA;cACAC,IAAA;cACAC,KAAA;gBAAAtB;cAAA;YACA;UACA,OACA,IAAAS,QAAA,CAAAX,IAAA,CAAAA,IAAA,CAAAoB,WAAA,aACA;YACA,KAAAK,MAAA,CAAAC,MAAA;YACAC,YAAA,CAAAR,OAAA,aAAAR,QAAA,CAAAX,IAAA,CAAAA,IAAA,CAAA4B,SAAA;YACAD,YAAA,CAAAR,OAAA;YACAU,OAAA,CAAAC,GAAA,CAAAH,YAAA,CAAAI,OAAA;YACA,KAAAV,OAAA,CAAAC,IAAA;cACAC,IAAA;YACA;UACA,OACA,IAAAZ,QAAA,CAAAX,IAAA,CAAAA,IAAA,CAAAoB,WAAA,cACA;YACA,KAAAC,OAAA,CAAAC,IAAA;cACAC,IAAA;YACA;UACA;QAEA,OAEA;UACA,KAAAS,QAAA,CAAAC,KAAA,CAAAtB,QAAA,CAAAX,IAAA,CAAAkC,GAAA;QACA;MACA,GAAAD,KAAA;QACAJ,OAAA,CAAAC,GAAA,OAAAG,KAAA,CAAAE,OAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}