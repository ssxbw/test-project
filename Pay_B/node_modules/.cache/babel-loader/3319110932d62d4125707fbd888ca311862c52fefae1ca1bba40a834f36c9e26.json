{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { permissionList, ermissionSave, ermissionDelete, roleDropDown, RolePermission } from '@/api/userMG';\nimport Pagination from '@/components/Pagination';\nexport default {\n  data() {\n    return {\n      nshow: true,\n      //switch开启\n      fshow: false,\n      //switch关闭\n      loading: false,\n      //是显示加载\n      editFormVisible: false,\n      //控制编辑页面显示与隐藏\n      title: '添加',\n      editForm: {\n        permissionId: '',\n        permissionName: '',\n        permission: '',\n        token: localStorage.getItem('logintoken')\n      },\n      // rules表单验证\n      rules: {\n        permissionName: [{\n          required: true,\n          message: '请输入权限名称',\n          trigger: 'blur'\n        }],\n        permission: [{\n          required: true,\n          message: '请输入权限CODE',\n          trigger: 'blur'\n        }]\n      },\n      formInline: {\n        page: 1,\n        limit: 10,\n        permissionName: '',\n        permission: '',\n        roleId: '0',\n        token: localStorage.getItem('logintoken')\n      },\n      // 选择数据\n      selectdata: [],\n      userparm: [],\n      //搜索权限\n      listData: [],\n      //用户数据\n      // 分页参数\n      pageparm: {\n        currentPage: 1,\n        pageSize: 10,\n        total: 10\n      }\n    };\n  },\n  // 注册组件\n  components: {\n    Pagination\n  },\n  /**\r\n   * 数据发生改变\r\n   */\n\n  watch: {},\n  /**\r\n   * 创建完毕\r\n   */\n\n  created() {\n    this.getdata(this.formInline);\n    this.getAccsee();\n  },\n  /**\r\n   * 里面的方法只有被调用才会执行\r\n   */\n\n  methods: {\n    // 获取数据方法\n    getdata(parameter) {\n      this.loading = true;\n      // 模拟数据\n      let res = {\n        code: 0,\n        msg: null,\n        count: 0,\n        data: [{\n          addUser: null,\n          editUser: null,\n          addTime: 1519728609000,\n          editTime: 1522585700000,\n          permissionId: 1,\n          permissionName: '用户-列表',\n          permission: 'system:User:list',\n          lay_CHECKED: false,\n          LAY_CHECKED: false\n        }, {\n          addUser: null,\n          editUser: null,\n          addTime: 1519728667000,\n          editTime: 1522585706000,\n          permissionId: 3,\n          permissionName: '用户-修改',\n          permission: 'system:User:save',\n          lay_CHECKED: false,\n          LAY_CHECKED: false\n        }, {\n          addUser: null,\n          editUser: null,\n          addTime: 1519728669000,\n          editTime: 1522256096000,\n          permissionId: 4,\n          permissionName: '用户-删除',\n          permission: 'system:User:delete',\n          lay_CHECKED: false,\n          LAY_CHECKED: false\n        }, {\n          addUser: 'root',\n          editUser: 'root',\n          addTime: 1520249365000,\n          editTime: 1522256085000,\n          permissionId: 5,\n          permissionName: '系统管理:角色:列表',\n          permission: 'system:Role:list',\n          lay_CHECKED: false,\n          LAY_CHECKED: false\n        }, {\n          addUser: 'root',\n          editUser: 'root',\n          addTime: 1520249588000,\n          editTime: 1520249588000,\n          permissionId: 7,\n          permissionName: 'system:Role:save',\n          permission: 'system:Role:save',\n          lay_CHECKED: false,\n          LAY_CHECKED: false\n        }, {\n          addUser: 'root',\n          editUser: 'root',\n          addTime: 1520249588000,\n          editTime: 1520249588000,\n          permissionId: 8,\n          permissionName: 'system:Role:delete',\n          permission: 'system:Role:delete',\n          lay_CHECKED: false,\n          LAY_CHECKED: false\n        }, {\n          addUser: 'root',\n          editUser: 'root',\n          addTime: 1520251014000,\n          editTime: 1520251014000,\n          permissionId: 9,\n          permissionName: 'system:Variable:列表',\n          permission: 'system:Variable:list',\n          lay_CHECKED: false,\n          LAY_CHECKED: false\n        }, {\n          addUser: 'root',\n          editUser: 'root',\n          addTime: 1520251014000,\n          editTime: 1520251014000,\n          permissionId: 11,\n          permissionName: 'system:Variable:修改',\n          permission: 'system:Variable:save',\n          lay_CHECKED: false,\n          LAY_CHECKED: false\n        }, {\n          addUser: 'root',\n          editUser: 'root',\n          addTime: 1520251014000,\n          editTime: 1520251014000,\n          permissionId: 12,\n          permissionName: 'system:Variable:删除',\n          permission: 'system:Variable:delete',\n          lay_CHECKED: false,\n          LAY_CHECKED: false\n        }]\n      };\n      this.loading = false;\n      this.listData = res.data;\n      // 分页赋值\n      this.pageparm.currentPage = this.formInline.page;\n      this.pageparm.pageSize = this.formInline.limit;\n      this.pageparm.total = res.count;\n      // 模拟数据结束\n\n      /***\r\n       * 调用接口，注释上面模拟数据 取消下面注释\r\n       */\n      // 获取权限列表\n      // permissionList(parameter)\n      //   .then(res => {\n      //     this.loading = false\n      //     if (res.success == false) {\n      //       this.$message({\n      //         type: 'info',\n      //         message: res.msg\n      //       })\n      //     } else {\n      //       this.listData = res.data\n      //       // 分页赋值\n      //       this.pageparm.currentPage = this.formInline.page\n      //       this.pageparm.pageSize = this.formInline.limit\n      //       this.pageparm.total = res.count\n      //     }\n      //   })\n      //   .catch(err => {\n      //     this.loading = false\n      //     this.$message.error('权限管理列表获取失败，请稍后再试！')\n      //   })\n    },\n\n    // 获取权限\n    getAccsee() {\n      roleDropDown().then(res => {\n        if (res.success == false) {\n          this.$message({\n            type: 'info',\n            message: res.msg\n          });\n        } else {\n          this.userparm = res.data;\n        }\n      }).catch(err => {\n        this.$message.error('权限获取失败，请稍后再试！');\n      });\n    },\n    // 分页插件事件\n    callFather(parm) {\n      this.formInline.page = parm.currentPage;\n      this.formInline.limit = parm.pageSize;\n      this.getdata(this.formInline);\n    },\n    // 搜索事件\n    search() {\n      this.getdata(this.formInline);\n    },\n    //显示编辑界面\n    handleEdit: function (index, row) {\n      this.editFormVisible = true;\n      // 深拷贝并赋值\n      //this.editForm = Object.assign({}, row)\n      if (row != undefined && row != 'undefined') {\n        this.title = '修改';\n        this.editForm.permissionId = row.permissionId;\n        this.editForm.permissionName = row.permissionName;\n        this.editForm.permission = row.permission;\n      } else {\n        this.title = '添加';\n        this.editForm.permissionId = '';\n        this.editForm.permissionName = '';\n        this.editForm.permission = '';\n      }\n    },\n    // 编辑、增加页面保存方法\n    submitForm(editData) {\n      this.$refs[editData].validate(valid => {\n        if (valid) {\n          ermissionSave(this.editForm).then(res => {\n            this.editFormVisible = false;\n            this.loading = false;\n            if (res.success) {\n              this.getdata(this.formInline);\n              this.$message({\n                type: 'success',\n                message: '权限管理保存成功！'\n              });\n            } else {\n              this.$message({\n                type: 'info',\n                message: res.msg\n              });\n            }\n          }).catch(err => {\n            this.editFormVisible = false;\n            this.loading = false;\n            this.$message.error('权限管理保存失败，请稍后再试！');\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    // 删除权限\n    deleteUser(index, row) {\n      this.$confirm('确定要删除吗?', '信息', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        ermissionDelete(row.permissionId).then(res => {\n          if (res.success) {\n            this.$message({\n              type: 'success',\n              message: '权限管理已删除！'\n            });\n            this.getdata(this.formInline);\n          } else {\n            this.$message({\n              type: 'info',\n              message: res.msg\n            });\n          }\n        }).catch(err => {\n          this.loading = false;\n          this.$message.error('权限管理删除失败,请稍后再试！');\n        });\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    },\n    // 选择复选框事件\n    selectChange(val) {\n      this.selectdata = val;\n    },\n    // 配置权限\n    RolePermission() {\n      let parms = {\n        roleId: '',\n        permissionIds: ''\n      };\n      if (this.formInline.roleId == '0') {\n        this.$message({\n          type: 'info',\n          message: '请选择角色'\n        });\n        return false;\n      }\n      parms.roleId = this.formInline.roleId;\n      let len = this.selectdata;\n      let ids = [];\n      if (len != 0) {\n        for (let i = 0; i < len.length; i++) {\n          ids.push(len[i].permissionId);\n        }\n      }\n      parms.permissionIds = ids.join(',');\n      RolePermission(parms).then(res => {\n        if (res.success) {\n          this.$message({\n            type: 'success',\n            message: '配置权限成功！'\n          });\n          this.getdata(this.formInline);\n        } else {\n          this.$message({\n            type: 'info',\n            message: res.msg\n          });\n        }\n      }).catch(err => {\n        this.loading = false;\n        this.$message.error('配置权限失败,请稍后再试！');\n      });\n    },\n    // 关闭编辑、增加弹出框\n    closeDialog() {\n      this.editFormVisible = false;\n    }\n  }\n};","map":{"version":3,"names":["permissionList","ermissionSave","ermissionDelete","roleDropDown","RolePermission","Pagination","data","nshow","fshow","loading","editFormVisible","title","editForm","permissionId","permissionName","permission","token","localStorage","getItem","rules","required","message","trigger","formInline","page","limit","roleId","selectdata","userparm","listData","pageparm","currentPage","pageSize","total","components","watch","created","getdata","getAccsee","methods","parameter","res","code","msg","count","addUser","editUser","addTime","editTime","lay_CHECKED","LAY_CHECKED","then","success","$message","type","catch","err","error","callFather","parm","search","handleEdit","index","row","undefined","submitForm","editData","$refs","validate","valid","deleteUser","$confirm","confirmButtonText","cancelButtonText","selectChange","val","parms","permissionIds","len","ids","i","length","push","join","closeDialog"],"sources":["src/views/hotelviews/system/Permission.vue"],"sourcesContent":["/**\r\n * 系统管理  权限管理\r\n */\r\n<template>\r\n  <div>\r\n    <!-- 面包屑导航 -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>权限管理</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <!-- 搜索筛选 -->\r\n    <el-form :inline=\"true\" :model=\"formInline\" class=\"user-search\">\r\n      <el-form-item label=\"搜索：\">\r\n        <el-input size=\"small\" v-model=\"formInline.permissionName\" placeholder=\"输入权限名称\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"\">\r\n        <el-input size=\"small\" v-model=\"formInline.permission\" placeholder=\"输入权限CODE\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"角色：\">\r\n        <el-select size=\"small\" v-model=\"formInline.roleId\" placeholder=\"请选择\">\r\n          <el-option selected label=\"请选择\" value=\"0\"></el-option>\r\n          <el-option v-for=\"parm in userparm\" :key=\"parm.roleId\" :label=\"parm.roleName\" :value=\"parm.roleId\"></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button size=\"small\" type=\"primary\" icon=\"el-icon-search\" @click=\"search\">搜索</el-button>\r\n        <el-button size=\"small\" type=\"primary\" icon=\"el-icon-plus\" @click=\"handleEdit()\">添加</el-button>\r\n        <el-button size=\"small\" type=\"primary\" icon=\"el-icon-plus\" @click=\"RolePermission()\">配置权限</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <!--列表-->\r\n    <el-table size=\"small\" @selection-change=\"selectChange\" :data=\"listData\" highlight-current-row v-loading=\"loading\" border element-loading-text=\"拼命加载中\" style=\"width: 100%;\">\r\n      <el-table-column align=\"center\" type=\"selection\" width=\"60\">\r\n      </el-table-column>\r\n      <el-table-column sortable prop=\"permissionName\" label=\"权限名称\" width=\"300\">\r\n      </el-table-column>\r\n      <el-table-column sortable prop=\"permission\" label=\"权限CODE\" width=\"300\">\r\n      </el-table-column>\r\n      <el-table-column sortable prop=\"editTime\" label=\"修改时间\" width=\"300\">\r\n        <template slot-scope=\"scope\">\r\n          <div>{{scope.row.editTime|timestampToTime}}</div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column sortable prop=\"editUser\" label=\"修改人\" width=\"300\">\r\n      </el-table-column>\r\n      <el-table-column align=\"center\" label=\"操作\" min-width=\"300\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button size=\"mini\" @click=\"handleEdit(scope.$index, scope.row)\">编辑</el-button>\r\n          <el-button size=\"mini\" type=\"danger\" @click=\"deleteUser(scope.$index, scope.row)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!-- 分页组件 -->\r\n    <Pagination v-bind:child-msg=\"pageparm\" @callFather=\"callFather\"></Pagination>\r\n    <!-- 编辑界面 -->\r\n    <el-dialog :title=\"title\" :visible.sync=\"editFormVisible\" width=\"30%\" @click=\"closeDialog\">\r\n      <el-form label-width=\"120px\" :model=\"editForm\" :rules=\"rules\" ref=\"editForm\">\r\n        <el-form-item label=\"权限名称\" prop=\"permissionName\">\r\n          <el-input size=\"small\" v-model=\"editForm.permissionName\" auto-complete=\"off\" placeholder=\"权限名称\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"权限CODE\" prop=\"permission\">\r\n          <el-input size=\"small\" v-model=\"editForm.permission\" auto-complete=\"off\" placeholder=\"权限CODE\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button size=\"small\" @click=\"closeDialog\">取消</el-button>\r\n        <el-button size=\"small\" type=\"primary\" :loading=\"loading\" class=\"title\" @click=\"submitForm('editForm')\">保存</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  permissionList,\r\n  ermissionSave,\r\n  ermissionDelete,\r\n  roleDropDown,\r\n  RolePermission\r\n} from '@/api/userMG'\r\nimport Pagination from '@/components/Pagination'\r\nexport default {\r\n  data() {\r\n    return {\r\n      nshow: true, //switch开启\r\n      fshow: false, //switch关闭\r\n      loading: false, //是显示加载\r\n      editFormVisible: false, //控制编辑页面显示与隐藏\r\n      title: '添加',\r\n      editForm: {\r\n        permissionId: '',\r\n        permissionName: '',\r\n        permission: '',\r\n        token: localStorage.getItem('logintoken')\r\n      },\r\n      // rules表单验证\r\n      rules: {\r\n        permissionName: [\r\n          { required: true, message: '请输入权限名称', trigger: 'blur' }\r\n        ],\r\n        permission: [\r\n          { required: true, message: '请输入权限CODE', trigger: 'blur' }\r\n        ]\r\n      },\r\n      formInline: {\r\n        page: 1,\r\n        limit: 10,\r\n        permissionName: '',\r\n        permission: '',\r\n        roleId: '0',\r\n        token: localStorage.getItem('logintoken')\r\n      },\r\n      // 选择数据\r\n      selectdata: [],\r\n      userparm: [], //搜索权限\r\n      listData: [], //用户数据\r\n      // 分页参数\r\n      pageparm: {\r\n        currentPage: 1,\r\n        pageSize: 10,\r\n        total: 10\r\n      }\r\n    }\r\n  },\r\n  // 注册组件\r\n  components: {\r\n    Pagination\r\n  },\r\n  /**\r\n   * 数据发生改变\r\n   */\r\n\r\n  watch: {},\r\n\r\n  /**\r\n   * 创建完毕\r\n   */\r\n\r\n  created() {\r\n    this.getdata(this.formInline)\r\n    this.getAccsee()\r\n  },\r\n\r\n  /**\r\n   * 里面的方法只有被调用才会执行\r\n   */\r\n\r\n  methods: {\r\n    // 获取数据方法\r\n    getdata(parameter) {\r\n      this.loading = true\r\n      // 模拟数据\r\n      let res = {\r\n        code: 0,\r\n        msg: null,\r\n        count: 0,\r\n        data: [\r\n          {\r\n            addUser: null,\r\n            editUser: null,\r\n            addTime: 1519728609000,\r\n            editTime: 1522585700000,\r\n            permissionId: 1,\r\n            permissionName: '用户-列表',\r\n            permission: 'system:User:list',\r\n            lay_CHECKED: false,\r\n            LAY_CHECKED: false\r\n          },\r\n          {\r\n            addUser: null,\r\n            editUser: null,\r\n            addTime: 1519728667000,\r\n            editTime: 1522585706000,\r\n            permissionId: 3,\r\n            permissionName: '用户-修改',\r\n            permission: 'system:User:save',\r\n            lay_CHECKED: false,\r\n            LAY_CHECKED: false\r\n          },\r\n          {\r\n            addUser: null,\r\n            editUser: null,\r\n            addTime: 1519728669000,\r\n            editTime: 1522256096000,\r\n            permissionId: 4,\r\n            permissionName: '用户-删除',\r\n            permission: 'system:User:delete',\r\n            lay_CHECKED: false,\r\n            LAY_CHECKED: false\r\n          },\r\n          {\r\n            addUser: 'root',\r\n            editUser: 'root',\r\n            addTime: 1520249365000,\r\n            editTime: 1522256085000,\r\n            permissionId: 5,\r\n            permissionName: '系统管理:角色:列表',\r\n            permission: 'system:Role:list',\r\n            lay_CHECKED: false,\r\n            LAY_CHECKED: false\r\n          },\r\n          {\r\n            addUser: 'root',\r\n            editUser: 'root',\r\n            addTime: 1520249588000,\r\n            editTime: 1520249588000,\r\n            permissionId: 7,\r\n            permissionName: 'system:Role:save',\r\n            permission: 'system:Role:save',\r\n            lay_CHECKED: false,\r\n            LAY_CHECKED: false\r\n          },\r\n          {\r\n            addUser: 'root',\r\n            editUser: 'root',\r\n            addTime: 1520249588000,\r\n            editTime: 1520249588000,\r\n            permissionId: 8,\r\n            permissionName: 'system:Role:delete',\r\n            permission: 'system:Role:delete',\r\n            lay_CHECKED: false,\r\n            LAY_CHECKED: false\r\n          },\r\n          {\r\n            addUser: 'root',\r\n            editUser: 'root',\r\n            addTime: 1520251014000,\r\n            editTime: 1520251014000,\r\n            permissionId: 9,\r\n            permissionName: 'system:Variable:列表',\r\n            permission: 'system:Variable:list',\r\n            lay_CHECKED: false,\r\n            LAY_CHECKED: false\r\n          },\r\n          {\r\n            addUser: 'root',\r\n            editUser: 'root',\r\n            addTime: 1520251014000,\r\n            editTime: 1520251014000,\r\n            permissionId: 11,\r\n            permissionName: 'system:Variable:修改',\r\n            permission: 'system:Variable:save',\r\n            lay_CHECKED: false,\r\n            LAY_CHECKED: false\r\n          },\r\n          {\r\n            addUser: 'root',\r\n            editUser: 'root',\r\n            addTime: 1520251014000,\r\n            editTime: 1520251014000,\r\n            permissionId: 12,\r\n            permissionName: 'system:Variable:删除',\r\n            permission: 'system:Variable:delete',\r\n            lay_CHECKED: false,\r\n            LAY_CHECKED: false\r\n          }\r\n        ]\r\n      }\r\n      this.loading = false\r\n      this.listData = res.data\r\n      // 分页赋值\r\n      this.pageparm.currentPage = this.formInline.page\r\n      this.pageparm.pageSize = this.formInline.limit\r\n      this.pageparm.total = res.count\r\n      // 模拟数据结束\r\n\r\n      /***\r\n       * 调用接口，注释上面模拟数据 取消下面注释\r\n       */\r\n      // 获取权限列表\r\n      // permissionList(parameter)\r\n      //   .then(res => {\r\n      //     this.loading = false\r\n      //     if (res.success == false) {\r\n      //       this.$message({\r\n      //         type: 'info',\r\n      //         message: res.msg\r\n      //       })\r\n      //     } else {\r\n      //       this.listData = res.data\r\n      //       // 分页赋值\r\n      //       this.pageparm.currentPage = this.formInline.page\r\n      //       this.pageparm.pageSize = this.formInline.limit\r\n      //       this.pageparm.total = res.count\r\n      //     }\r\n      //   })\r\n      //   .catch(err => {\r\n      //     this.loading = false\r\n      //     this.$message.error('权限管理列表获取失败，请稍后再试！')\r\n      //   })\r\n    },\r\n    // 获取权限\r\n    getAccsee() {\r\n      roleDropDown()\r\n        .then(res => {\r\n          if (res.success == false) {\r\n            this.$message({\r\n              type: 'info',\r\n              message: res.msg\r\n            })\r\n          } else {\r\n            this.userparm = res.data\r\n          }\r\n        })\r\n        .catch(err => {\r\n          this.$message.error('权限获取失败，请稍后再试！')\r\n        })\r\n    },\r\n    // 分页插件事件\r\n    callFather(parm) {\r\n      this.formInline.page = parm.currentPage\r\n      this.formInline.limit = parm.pageSize\r\n      this.getdata(this.formInline)\r\n    },\r\n    // 搜索事件\r\n    search() {\r\n      this.getdata(this.formInline)\r\n    },\r\n    //显示编辑界面\r\n    handleEdit: function(index, row) {\r\n      this.editFormVisible = true\r\n      // 深拷贝并赋值\r\n      //this.editForm = Object.assign({}, row)\r\n      if (row != undefined && row != 'undefined') {\r\n        this.title = '修改'\r\n        this.editForm.permissionId = row.permissionId\r\n        this.editForm.permissionName = row.permissionName\r\n        this.editForm.permission = row.permission\r\n      } else {\r\n        this.title = '添加'\r\n        this.editForm.permissionId = ''\r\n        this.editForm.permissionName = ''\r\n        this.editForm.permission = ''\r\n      }\r\n    },\r\n    // 编辑、增加页面保存方法\r\n    submitForm(editData) {\r\n      this.$refs[editData].validate(valid => {\r\n        if (valid) {\r\n          ermissionSave(this.editForm)\r\n            .then(res => {\r\n              this.editFormVisible = false\r\n              this.loading = false\r\n              if (res.success) {\r\n                this.getdata(this.formInline)\r\n                this.$message({\r\n                  type: 'success',\r\n                  message: '权限管理保存成功！'\r\n                })\r\n              } else {\r\n                this.$message({\r\n                  type: 'info',\r\n                  message: res.msg\r\n                })\r\n              }\r\n            })\r\n            .catch(err => {\r\n              this.editFormVisible = false\r\n              this.loading = false\r\n              this.$message.error('权限管理保存失败，请稍后再试！')\r\n            })\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    // 删除权限\r\n    deleteUser(index, row) {\r\n      this.$confirm('确定要删除吗?', '信息', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      })\r\n        .then(() => {\r\n          ermissionDelete(row.permissionId)\r\n            .then(res => {\r\n              if (res.success) {\r\n                this.$message({\r\n                  type: 'success',\r\n                  message: '权限管理已删除！'\r\n                })\r\n                this.getdata(this.formInline)\r\n              } else {\r\n                this.$message({\r\n                  type: 'info',\r\n                  message: res.msg\r\n                })\r\n              }\r\n            })\r\n            .catch(err => {\r\n              this.loading = false\r\n              this.$message.error('权限管理删除失败,请稍后再试！')\r\n            })\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          })\r\n        })\r\n    },\r\n    // 选择复选框事件\r\n    selectChange(val) {\r\n      this.selectdata = val\r\n    },\r\n    // 配置权限\r\n    RolePermission() {\r\n      let parms = {\r\n        roleId: '',\r\n        permissionIds: ''\r\n      }\r\n      if (this.formInline.roleId == '0') {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '请选择角色'\r\n        })\r\n        return false\r\n      }\r\n      parms.roleId = this.formInline.roleId\r\n      let len = this.selectdata\r\n      let ids = []\r\n      if (len != 0) {\r\n        for (let i = 0; i < len.length; i++) {\r\n          ids.push(len[i].permissionId)\r\n        }\r\n      }\r\n      parms.permissionIds = ids.join(',')\r\n      RolePermission(parms)\r\n        .then(res => {\r\n          if (res.success) {\r\n            this.$message({\r\n              type: 'success',\r\n              message: '配置权限成功！'\r\n            })\r\n            this.getdata(this.formInline)\r\n          } else {\r\n            this.$message({\r\n              type: 'info',\r\n              message: res.msg\r\n            })\r\n          }\r\n        })\r\n        .catch(err => {\r\n          this.loading = false\r\n          this.$message.error('配置权限失败,请稍后再试！')\r\n        })\r\n    },\r\n    // 关闭编辑、增加弹出框\r\n    closeDialog() {\r\n      this.editFormVisible = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.user-search {\r\n  margin-top: 20px;\r\n}\r\n.userRole {\r\n  width: 100%;\r\n}\r\n</style>\r\n\r\n "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}